import java.text.SimpleDateFormat

println("======================> utils.gradle: ")
/**
 * 导出函数，全局访问
 */
ext {
    isCurrentFlavorNotNull= this.&isCurrentFlavorNotNull
    getConfigValue= this.&getConfigValue
    releaseTime= this.&releaseTime
    currentData= this.&currentData
    getFlavorsInfo = this.&getFlavorsInfo
}

/**
 * 当前flavor是否为空，点击运行程序和使用assembleRelease打包不会为空
 * 如果同步就会为空，为空就不设置相关的属性，因为拿不到。
 * 也可以默认设置一个flavor的属性，但是这个是不对的
 * @return
 */
def isCurrentFlavorNotNull() {
//    println("======================> isCurrentFlavorNotNull22: " + rootProject.currentFlavor)
    return rootProject.currentFlavor
}

/**
 * 获取当前flavor key对应的属性值
 * @param key
 * @return
 */
def getConfigValue(key) {
//    println("======================> getConfigValue key: " + key)
//    println("======================> getConfigValue rootProject.productConfig: " + rootProject.productConfig)
//    println("======================> getConfigValue rootProject.currentFlavor: " + rootProject.currentFlavor)
    if(rootProject.currentFlavor)
        return rootProject.productConfig.get(rootProject.currentFlavor).get(key)
    return ""
}

/**
 * 获取flavor相关信息
 * @param flavor
 * @return
 */
def getFlavorsInfo(String flavor) {
    return rootProject.ext.productConfig.get(flavor)
}

def releaseTime() {
    return new Date().format("yyyy-MM-dd_HH-mm-ss")
}

def currentData() {
    return new SimpleDateFormat("yy_MM_dd").format(new Date())
}




